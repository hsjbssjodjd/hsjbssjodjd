{
    "URL": "https://github.com/verilator/verilator/issues/4234",
    "Summary": "Unpacked structs, bug in verilated C++ for combinatorial logic from struct fields",
    "Description": "@wsnyder continuation from #4226 .\nHere is the sample code:\nt_unpacked_struct_comb_logic.tar.gz\nmodule test (\n        input wire clk,\n        output logic  q\n    );\n\n    /* verilator lint_off UNOPTFLAT */\n    typedef struct {\n        logic overflow2;\n        logic next;\n    } comb_t;\n    comb_t comb;\n    /* verilator lint_on UNOPTFLAT */\n \n    /* verilator lint_off ALWCOMBORDER */\n    always_comb begin\n        /* comb.next = 0; */\n        if(comb.overflow2) begin \n            comb.next = 1;\n        end else begin\n            comb.next = 0;\n        end\n    end\n    /* verilator lint_on ALWCOMBORDER */\n\n    always_ff @(posedge clk) begin\n        q <= comb.next;\n    end\nendmodule\nAnd the error message:\nVt_unpacked_struct_comb_logic___024root__DepSet_h67077cec__0.cpp: In function ‘void Vt_unpacked_struct_comb_logic___024root___eval_triggers__act(Vt_unpacked_struct_comb_logic___024root*)’:\nVt_unpacked_struct_comb_logic___024root__DepSet_h67077cec__0.cpp:20:39: error: no match for ‘operator!=’ (operand types are ‘Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1’ and ‘Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1’)\n   19 |     vlSelf->__VactTriggered.at(0U) = (vlSelf->test__DOT__comb\n      |                                       ~~~~~~~~~~~~~~~~~~~~~~~\n      |                                               |\n      |                                               Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1\n   20 |                                       != vlSelf->__Vtrigrprev__TOP__test__DOT__comb);\n      |                                       ^~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n      |                                                  |\n      |                                                  Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1\nIn file included from Vt_unpacked_struct_comb_logic__ALL.cpp:7:\nVt_unpacked_struct_comb_logic___024root__DepSet_h67077cec__0__Slow.cpp: In function ‘void Vt_unpacked_struct_comb_logic___024root___eval_triggers__stl(Vt_unpacked_struct_comb_logic___024root*)’:\nVt_unpacked_struct_comb_logic___024root__DepSet_h67077cec__0__Slow.cpp:21:39: error: no match for ‘operator!=’ (operand types are ‘Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1’ and ‘Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1’)\n   20 |     vlSelf->__VstlTriggered.at(1U) = (vlSelf->test__DOT__comb\n      |                                       ~~~~~~~~~~~~~~~~~~~~~~~\n      |                                               |\n      |                                               Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1\n   21 |                                       != vlSelf->__Vtrigrprev__TOP__test__DOT__comb);\n      |                                       ^~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n      |                                                  |\n      |                                                  Vt_unpacked_struct_comb_logic_test__DOT__comb_t__struct1"
}