{
    "URL": "https://github.com/verilator/verilator/issues/2775",
    "Summary": "Parallel build fails when have extended class",
    "Description": "The following code fails to compile when using VM_PARALLEL_BUILDS=1, which can be trigered when using big SystemVerilog files.\nclass class1;\nendclass;\n\nclass class2 extends class1;\nendclass;\n\nThe C++ code fails to build because the header file for the derived class uses undefined forward declaration of the base class.\n[irudog@mylaptop test]$ verilator --cc top.sv \n[irudog@mylaptop test]$ cd obj_dir/; make -f Vtop.mk VM_PARALLEL_BUILDS=1\ng++  -I.  -MMD -I/usr/share/verilator/include -I/usr/share/verilator/include/vltstd -DVM_COVERAGE=0 -DVM_SC=0 -DVM_TRACE=0 -DVM_TRACE_FST=0 -faligned-new -fcf-protection=none -Wno-bool-operation -Wno-sign-compare -Wno-uninitialized -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable -Wno-shadow      -std=gnu++14 -Os -c -o Vtop.o Vtop.cpp\ng++  -I.  -MMD -I/usr/share/verilator/include -I/usr/share/verilator/include/vltstd -DVM_COVERAGE=0 -DVM_SC=0 -DVM_TRACE=0 -DVM_TRACE_FST=0 -faligned-new -fcf-protection=none -Wno-bool-operation -Wno-sign-compare -Wno-uninitialized -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable -Wno-shadow      -std=gnu++14 -Os -c -o Vtop___024unit.o Vtop___024unit.cpp\ng++  -I.  -MMD -I/usr/share/verilator/include -I/usr/share/verilator/include/vltstd -DVM_COVERAGE=0 -DVM_SC=0 -DVM_TRACE=0 -DVM_TRACE_FST=0 -faligned-new -fcf-protection=none -Wno-bool-operation -Wno-sign-compare -Wno-uninitialized -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable -Wno-shadow      -std=gnu++14 -Os -c -o Vtop___024unit__03a__03aclass1__Vclpkg.o Vtop___024unit__03a__03aclass1__Vclpkg.cpp\ng++  -I.  -MMD -I/usr/share/verilator/include -I/usr/share/verilator/include/vltstd -DVM_COVERAGE=0 -DVM_SC=0 -DVM_TRACE=0 -DVM_TRACE_FST=0 -faligned-new -fcf-protection=none -Wno-bool-operation -Wno-sign-compare -Wno-uninitialized -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable -Wno-shadow      -std=gnu++14 -Os -c -o Vtop___024unit__03a__03aclass2__Vclpkg.o Vtop___024unit__03a__03aclass2__Vclpkg.cpp\nIn file included from Vtop___024unit__03a__03aclass2__Vclpkg.cpp:5:\nVtop___024unit__03a__03aclass2__Vclpkg.h:48:47: error: invalid use of incomplete type ‘class Vtop___024unit__03a__03aclass1’\n   48 | class Vtop___024unit__03a__03aclass2 : public Vtop___024unit__03a__03aclass1 {\n      |                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nVtop___024unit__03a__03aclass2__Vclpkg.h:43:7: note: forward declaration of ‘class Vtop___024unit__03a__03aclass1’\n   43 | class Vtop___024unit__03a__03aclass1;\n      |       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nVtop___024unit__03a__03aclass2__Vclpkg.cpp: In constructor ‘Vtop___024unit__03a__03aclass2::Vtop___024unit__03a__03aclass2(Vtop__Syms*)’:\nVtop___024unit__03a__03aclass2__Vclpkg.cpp:12:97: error: type ‘Vtop___024unit__03a__03aclass1’ is not a direct base of ‘Vtop___024unit__03a__03aclass2’\n   12 | ___024unit__03a__03aclass2(Vtop__Syms* __restrict vlSymsp): Vtop___024unit__03a__03aclass1(vlSymsp) {\n      |                                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nmake: *** [/usr/share/verilator/include/verilated.mk:235: Vtop___024unit__03a__03aclass2__Vclpkg.o] Error 1\n\nTested on verilator 4.108."
}