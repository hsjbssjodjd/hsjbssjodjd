{
    "URL": "https://github.com/verilator/verilator/issues/3548",
    "Summary": "Dynamic array initialized with one element get converted to unsigned",
    "Description": "On verilator master branch\nThe following code:\nmodule tjo();\n\ninitial begin\n    int some_ints[] = {12};\n    $display(\"%d\", some_ints[0]);\nend\n\nendmodule\nGet converted to:\nVL_ATTR_COLD void Vtjo___024root___initial__TOP__0(Vtjo___024root* vlSelf) {\n    if (false && vlSelf) {}  // Prevent unused\n    Vtjo__Syms* const __restrict vlSymsp VL_ATTR_UNUSED = vlSelf->vlSymsp;\n    VL_DEBUG_IF(VL_DBG_MSGF(\"+    Vtjo___024root___initial__TOP__0\\n\"); );\n    // Body\n    VL_WRITEF(\"%11d\\n\",32,0xcU.at(0U));\n}\nNote the 0xcU.at(0U) part.\nThis error does not happen for this code:\nmodule tjo();\n\ninitial begin\n    int some_ints[] = '{12};\n    $display(\"%d\", some_ints[0]);\nend\n\nendmodule\nOr this code:\nmodule tjo();\n\ninitial begin\n    int some_ints[] = {12, 13};\n    $display(\"%d\", some_ints[0]);\nend\n\nendmodule\nThe working cases are converted to this or similiar:\nVL_ATTR_COLD void Vtjo___024root___initial__TOP__0(Vtjo___024root* vlSelf) {\n    if (false && vlSelf) {}  // Prevent unused\n    Vtjo__Syms* const __restrict vlSymsp VL_ATTR_UNUSED = vlSelf->vlSymsp;\n    VL_DEBUG_IF(VL_DBG_MSGF(\"+    Vtjo___024root___initial__TOP__0\\n\"); );\n    // Init\n    VlQueue<IData/*31:0*/> tjo__DOT__unnamedblk1__DOT__some_ints;\n    // Body\n    tjo__DOT__unnamedblk1__DOT__some_ints = VlQueue<IData/*31:0*/>::cons(0xdU, \n                                                                         0xcU);\n    VL_WRITEF(\"%11d\\n\",32,tjo__DOT__unnamedblk1__DOT__some_ints.at(0U));\n}\nI have tried with arrays of int and string and they both have this problem."
}