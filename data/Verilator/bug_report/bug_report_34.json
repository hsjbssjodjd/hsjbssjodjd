{
    "URL": "https://github.com/verilator/verilator/issues/3851",
    "Summary": "Verilator internal fault in unique case",
    "Description": "Hi,\nVerilator is throwing an internal fault on a unique case statement. Found in 5.004 but exists on current master and not in previous v4.2xx. Something to do with all enumerations being in the unique case as it doesn't crash if a case item or the unique is removed. I'm afraid I haven't got beyond looking at a stack trace (which looked similar to #3848) as it's taken me a fair while to extract the test case from a large codebase so wanted to report.\ntest_regress/t/t_enum_case.pl \n======================================================================\ndist/t_enum_case: ==================================================\n-Skip: dist/t_enum_case: scenario 'dist' not enabled for test\ndist/t_enum_case: -Skip: Skip: scenario 'dist' not enabled for test\n==SUMMARY: Passed 0  Failed 0  Time 0:00\n======================================================================\nvlt/t_enum_case: ==================================================\n\tperl /a/work/richardp/sili/20230110-verilator/verilator/test_regress/../bin/verilator --prefix Vt_enum_case ../obj_vlt/t_enum_case/Vt_enum_case__main.cpp --exe --make gmake --x-assign unique -cc -Mdir obj_vlt/t_enum_case --fdedup --debug-check --comp-limit-members 10 -Wno-CASEINCOMPLETE --clk clk  -f input.vc +define+TEST_OBJ_DIR=obj_vlt/t_enum_case +define+TEST_DUMPFILE=obj_vlt/t_enum_case/simx.vcd t/t_enum_case.v    > obj_vlt/t_enum_case/vlt_compile.log\n%Error: Verilator internal fault, sorry. Suggest trying --debug --gdbbt\n%Error: Command Failed ulimit -s unlimited 2>/dev/null; exec /a/work/richardp/sili/20230110-verilator/verilator/test_regress/../bin/verilator_bin --prefix Vt_enum_case ../obj_vlt/t_enum_case/Vt_enum_case__main.cpp --exe --make gmake --x-assign unique -cc -Mdir obj_vlt/t_enum_case --fdedup --debug-check --comp-limit-members 10 -Wno-CASEINCOMPLETE --clk clk -f input.vc +define+TEST_OBJ_DIR=obj_vlt/t_enum_case +define+TEST_DUMPFILE=obj_vlt/t_enum_case/simx.vcd t/t_enum_case.v\n%Warning: vlt/t_enum_case: Exec of perl failed: %Error: Verilator internal fault, sorry. Suggest trying --debug --gdbbt\n\nvlt/t_enum_case: %Error: Exec of perl failed: %Error: Verilator internal fault, sorry. Suggest trying --debug --gdbbt\nvlt/t_enum_case: FAILED: Exec of perl failed: %Error: Verilator internal fault, sorry. Suggest trying --debug --gdbbt\n==SUMMARY: Passed 0  Failed 1  Time 0:00\n==SUMMARY: Passed 0  Failed 1  Time 0:00\n\n======================================================================\n\t#vlt/t_enum_case: %Error: Exec of perl failed: %Error: Verilator internal fault, sorry. Suggest trying --debug --gdbbt\n\t\tmake && test_regress/t/t_enum_case.pl  --vlt\nTESTS DONE, FAILED: Passed 0  Failed 1  Time 0:00\n\nThe below testcase run on CentOS Linux release 7.9.2009 (Core) compiled with clang version 15.0.3\ncommit 2d6d1235d65ee08c67d7d3fe896903d33fb7d70b (HEAD -> master, origin/master, origin/HEAD)\nAuthor: Larry Doolittle <ldoolitt@recycle.lbl.gov>\nDate:   Sun Jan 8 15:17:24 2023 -0800\n\n    Commentary: Spelling (and grammar) fixes (#3846)\n\ntest_regress/t/t_enum_case.v\n// DESCRIPTION: Verilator: Verilog Test module\n//\n// This file ONLY is placed under the Creative Commons Public Domain, for\n// any use, without warranty, 2009 by Wilson Snyder.\n// SPDX-License-Identifier: CC0-1.0\n\nmodule t (/*AUTOARG*/);\n\n   enum logic [2:0] {\n          e0,\n          e1,\n          e2,\n\t  e3\n        } EN;\n\n   initial begin\n\n      unique case (EN)\n          e0 :;\n          e1 :;\n          e2 :;\n          e3 :;\n      endcase\n\n      $write(\"*-* All Finished *-*\\n\");\n      $finish;\n   end\n\nendmodule"
}