{
    "URL": "https://github.com/verilator/verilator/issues/3733",
    "Summary": "Internal error with timing control in while-break loop",
    "Description": "Hi! I encountered a internal error while playing around with the new timing feature.\n\nCan you attach an example that shows the issue?  (Must be openly licensed, ideally in test_regress format.)\n\nhere is a minimal example t_timing_break.sv (it works fine with vivado's xsim):\nmodule t();\n  logic clk = 0;\n  logic out = 1;\n\n  always #5 clk = ~clk;\n\n  initial begin\n    while(1) begin\n      if(out) begin\n        break;\n      end\n      @(negedge clk);\n    end\n\n    $finish();\n  end\nendmodule\nresult of command verilator --debug --timing --binary t_timing_break.sv:\nStarting Verilator 5.003 devel rev v5.002-13-ga29d9469d\n- Verilator.cpp:586:  Option --verilate: Start Verilation\n\n.......\n\n- V3Ast.cpp:1121:     Dumping obj_dir/Vt_timming_break_030_const.tree\n%Error: Internal Error: t_timming_break.sv:10:9: ../V3Broken.cpp:172: Broken link in node (or something without maybePointedTo): '!labelp()->brokeExistsBelow()' @ ../V3AstNodes.cpp:1604\n-node: JUMPGO 0x555556116980 <e204> {c10aj} -> JUMPLABEL 0x5555561168c0 <e247> {c8af} -> JUMPBLOCK 0x5555561167f0 <e249#> {c8af}\n   10 |         break;\n      |         ^~~~~\n                        ... See the manual at https://verilator.org/verilator_doc.html for more assistance.\n- V3Ast.cpp:1121:     Dumping obj_dir/Vt_timming_break_990_final.tree\n- V3Broken.cpp:326:   Broken called under broken, skipping recursion.\n- V3StatsReport.cpp:223:statsReport: \n%Error: Internal Error: Aborting since under --debug\n%Error: export VERILATOR_ROOT=/home/jomit/usr\n%Error: setarch --addr-no-randomize /home/jomit/usr/bin/verilator_bin_dbg --debug --timing --binary t_timming_break.sv\n%Error: Command Failed setarch --addr-no-randomize /home/jomit/usr/bin/verilator_bin_dbg --debug --timing --binary t_timming_break.sv\n\n\nWhat 'verilator --version' are you using?  Did you try it with the git master version?\n\nusing latest git master version Verilator 5.003 devel rev v5.002-13-ga29d9469d\n\nWhat OS and distribution are you using?\n\nManjaro 22.0.0\n\nMay we assist you in trying to fix this in Verilator yourself?\n\nno, I'm not familiar with verilator source code."
}