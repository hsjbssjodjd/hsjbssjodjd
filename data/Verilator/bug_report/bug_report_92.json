{
    "URL": "https://github.com/verilator/verilator/issues/2430",
    "Summary": "Lint: DECLFILENAME warning is picking up a blackboxed module inside the actual module",
    "Description": "Have a look at this file:\nhttps://github.com/lowRISC/opentitan/blob/master/hw/ip/prim_xilinx/rtl/prim_xilinx_clock_mux2.sv\nSimplified:\nmodule prim_xilinx_clock_mux2 (\n  input        clk0_i,\n);\n\n  BUFGMUX bufgmux_i (\n    .I1 ( clk1_i )\n  );\nendmodule\nBUFGMUX is a Xilinx-provided module which is effectively a black-box for Verilator.\nThis file is always compiled, but not used for Verilator (an implementation is selected through a generate if/else block).\nWhen running this through Verilator lint, I get:\n%Warning-DECLFILENAME: ../../../hw/ip/prim_xilinx/rtl/prim_xilinx_clock_mux2.sv:17:11: Filename 'prim_xilinx_clock_mux2' does not match NOTFOUNDMODULE name: 'BUFGMUX'\n   17 |   BUFGMUX bufgmux_i (\n      |           ^~~~~~~~~\n                       ... Use \"/* verilator lint_off DECLFILENAME */\" and lint_on around source to disable this message.\n\nI'm not sure what happens here, but the message is strange: the filename of the module has nothing to do with the BUFGMUX module, which is instantiated inside it. And the actual module name prim_xilinx_clock_mux2 matches the file name prim_xilinx_clock_mux2.sv.\n$ verilator --version\nVerilator 4.037 devel rev v4.036-60-gfa828ac9b\n\n(A recent master.)"
}