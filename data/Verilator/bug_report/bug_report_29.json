{
    "URL": "https://github.com/verilator/verilator/issues/3937",
    "Summary": "vpi_iterate doesn't find modules when an interface is the only thing in the module",
    "Description": "Cocotb has a simple test intended to show simulators can discover system verilog interfaces using this code: https://github.com/cocotb/cocotb/blob/master/tests/test_cases/test_sv_interface/top.sv\nCocotb starts up trying to detect the top level module with code similar to\nvpiHandle it = vpi_iterate(vpiModule, NULL);\n\nHowever, it appears with the simple test module above, with only an interface internal to the module, Verilator does not return anything on that initial vpi_iterate().\nAdding in a logic d right after the interface (like here cocotb/cocotb#3191) is enough for Verilator to succeed on the vpi_iterate() command. However, Questa, nor Icarus need something similar to vpi_iterate.\nI have a test_regress style test here: https://github.com/forensicgarlic/verilator/tree/vpi_iterate_empty_module. However, I don't where in verilator source code a fix would be applied."
}