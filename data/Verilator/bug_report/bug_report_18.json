{
    "URL": "https://github.com/verilator/verilator/issues/4129",
    "Summary": "XML output cell hier of generate block",
    "Description": "When having a module instantiation in generate block like below:\nmodule submod();\n    wire some_sig;\nendmodule\n\nmodule test(\n);\n    if(1) begin : some_gen\n        submod submod_i();\n    end\nendmodule\n\nI think that the generated XML file is incorrect, specifically  section cells attribute hier.\nThis is the output I get:\n<?xml version=\"1.0\" ?>\n<!-- DESCRIPTION: Verilator output: XML representation of netlist -->\n<verilator_xml>\n  <files>\n    <file id=\"a\" filename=\"&lt;built-in&gt;\" language=\"1800-2017\"/>\n    <file id=\"b\" filename=\"&lt;command-line&gt;\" language=\"1800-2017\"/>\n    <file id=\"c\" filename=\"test.v\" language=\"1800-2017\"/>\n  </files>\n  <module_files>\n    <file id=\"c\" filename=\"test.v\" language=\"1800-2017\"/>\n  </module_files>\n  <cells>\n    <cell loc=\"c,5,8,5,12\" name=\"test\" submodname=\"test\" hier=\"test\">\n-     <cell loc=\"c,9,12,9,20\" name=\"submod_i\" submodname=\"submod\" hier=\"test.submod_i\"/>\n+     <cell loc=\"c,9,12,9,20\" name=\"submod_i\" submodname=\"submod\" hier=\"test.some_gen.submod_i\"/>\n    </cell>\n  </cells>\n  <netlist>\n    <module loc=\"c,5,8,5,12\" name=\"test\" origName=\"test\" topModule=\"1\">\n      <begin loc=\"c,8,15,8,23\" name=\"some_gen\">\n        <instance loc=\"c,9,12,9,20\" name=\"submod_i\" defName=\"submod\" origName=\"submod_i\"/>\n      </begin>\n    </module>\n    <module loc=\"c,1,8,1,14\" name=\"submod\" origName=\"submod\">\n      <var loc=\"c,2,10,2,18\" name=\"some_sig\" dtype_id=\"1\" vartype=\"logic\" origName=\"some_sig\"/>\n    </module>\n    <typetable loc=\"a,0,0,0,0\">\n      <basicdtype loc=\"c,2,10,2,18\" id=\"1\" name=\"logic\"/>\n    </typetable>\n  </netlist>\n</verilator_xml>\n\nI would expect that the path to the submodule would also include some_gen. Am I correct to assume that?\nThis way I cannot access VPI signal based on this path, as some_sig signal for VPI  is test.some_gen.submod_i.some_sig\nMay we assist you in trying to fix this in Verilator yourself?\nYes, I could fix it if it is bug after all, and I can get some directions."
}