{
    "URL": "https://github.com/verilator/verilator/issues/2763",
    "Summary": "error due to no-timescale on primitive",
    "Description": "The simulation needs to read the library sim file which includes the udp.\n`timescale is in the library sim file. but verilator can't handle it.\nHere is the code to reproduce the issue.\ntop.v\n`timescale 1ns/1ns\nmodule top;\n\n\nwire out;\nwire in; \nreg clk;\nalways #1 clk = ~clk;\n\nreg clr_;\nreg set_;\n\nreg VDD;\nreg VSS;\nreg NOTIFIER;\n\nudp_dff_PWR_scl2mc_cin28hpm_base_svt_c31 u0(out, in, clk, clr_, set_, VDD, VSS, NOTIFIER);\n\nendmodule\nudp.v\n`timescale 1ns/1ns\n\n`celldefine\nprimitive udp_dff_PWR_scl2mc_cin28hpm_base_svt_c31 (out, in, clk, clr_, set_, VDD, VSS, NOTIFIER);\noutput out;\ninput in, clk, clr_, set_, VDD, VSS, NOTIFIER;\nreg out;\n\ntable\n\n//in    clk     clr_    set_    VDD     VSS     NOTIFIER    :Qt     :Qt+1\n0       r       ?       1       1       0       ?       :   ?   :   0;\n1       r       1       ?       1       0       ?       :   ?   :   1;\n1       *       1       ?       1       0       ?       :   1   :   1;\n0       *       ?       1       1       0       ?       :   0   :   0;\n?       f       ?       ?       1       0       ?       :   ?   :   -;\n*       b       ?       ?       1       0       ?       :   ?   :   -;\n?       ?       ?       0       1       0       ?       :   ?   :   1;\n?       b       1       *       1       0       ?       :   1   :   1;\n1       x       1       *       1       0       ?       :   1   :   1;\n?       ?       0       1       1       0       ?       :   ?   :   0;\n?       b       *       1       1       0       ?       :   0   :   0;\n0       x       *       1       1       0       ?       :   0   :   0;\n?       ?       ?       ?       ?       ?       ?       :   ?   :   x;\n\nendtable //udp_dff_PWR_scl2mc_cin28hpm_base_svt_c31\nendprimitive\n`endcelldefine\n\n`celldefine\nmodule and_gate(in1, in2, out);\ninput in1;\ninput in2;\noutput out;\n\nassign out = in1 & in2;\nendmodule\n`endcelldefine\nhere is the command:\nverilator --cc test.v --bbox-unsup -Wno-STMTDLY  --timescale 1ns/1ns  --top-module top -v udp.v\nHere is the error msg:\n%Error-TIMESCALEMOD: udp.v:4:11: Timescale missing on this module as other modules have it (IEEE 1800-2017 3.14.2.2)\n                     test.v:2:8: ... Location of module with timescale\n    2 | module top;\n      |        ^~~\n%Error: Exiting due to 1 error(s)\n        ... See the manual and https://verilator.org for more assistance."
}