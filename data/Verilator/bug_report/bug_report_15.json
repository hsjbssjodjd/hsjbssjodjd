{
    "URL": "https://github.com/verilator/verilator/issues/4147",
    "Summary": "Crash related to data types and super.new call",
    "Description": "I have some internal crashes during compilation for code that otherwise runs and compiles. I run multiple tests against the source code, but about 5 of the tests end in an internal error. I can't figure out a pattern either.\nI get something like the following:\n- V3Ast.cpp:1215:     Dumping obj_dir/Vtestrunner_012_width.tree\n- V3Width.cpp:7477:   widthCommit: \n- V3Const.cpp:3751:   constifyAllLive: \n- V3Ast.cpp:1215:     Dumping obj_dir/Vtestrunner_014_const.tree\n%Error: Internal Error: /home/tudor/projects/github/svunit/svunit/svunit_base/svunit_testcase.sv:95:9: ../V3Broken.cpp:186: No dtype on node with hasDType(): NEW 'new'\n                                                                                                     : ... In instance testrunner.___05Fts\n-node: NEW 0x1d65aa0 <e15144> {o95aj} @dt=0@  new pkg=0x1d5bfa0 -> FUNC 0x1d5d0b0 <e20815> {n56ax} @dt=0x1cae740@(w0)void  new [METHOD]\n   95 |   super.new(name);\n      |         ^~~\n                        /home/tudor/projects/github/svunit/svunit/svunit_base/svunit_base.sv:86:1: ... note: In file included from svunit_base.sv\n                        /home/tudor/projects/github/svunit/svunit/svunit_base/svunit_string_utils.svh:25:1: ... note: In file included from svunit_string_utils.svh\n                        /home/tudor/projects/github/svunit/svunit/svunit_base/svunit_types.svh:31:47: ... note: In file included from svunit_types.svh\n                        /home/tudor/projects/github/svunit/svunit/svunit_base/svunit_pkg.sv:25:60: ... note: In file included from svunit_pkg.sv\n                        ... See the manual at https://verilator.org/verilator_doc.html for more assistance.\n- V3Ast.cpp:1215:     Dumping obj_dir/Vtestrunner_990_final.tree\n- V3Broken.cpp:330:   Broken called under broken, skipping recursion.\n- V3StatsReport.cpp:226:statsReport: \n%Error: Internal Error: Aborting since under --debug\n%Error: export VERILATOR_ROOT=\n%Error: ulimit -s unlimited 2>/dev/null; exec /opt/verilator/v5.008-143-gcac634d39/bin/verilator_bin_dbg --debug --binary --top-module testrunner -f .svunit.f +define+SVUNIT_VERSION=unreleased\n\nThe code mentioned in the error message is legal SystemVerilog code. It compiles in all big 3 simulators and it also compiles in Verilator. It's just some regular constructor calling a super.new().\nAny pointers on how to debug this?"
}