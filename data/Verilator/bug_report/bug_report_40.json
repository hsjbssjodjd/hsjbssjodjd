{
    "URL": "https://github.com/verilator/verilator/issues/3736",
    "Summary": "Warning-UNUSEDSIGNAL not being raised if verilator is invoqued with --coverage flag",
    "Description": "To replicate:\n\n\nAdd an unused reg to top.v in make_tracing_c. i.e:\ntop.v:\n\n   // And an example sub module. The submodule will print stuff.\n   sub sub (/*AUTOINST*/\n            // Inputs\n            .clk                        (clk),\n            .reset_l                    (reset_l));\n\n   reg tes_arg;   // Unused register here!\n   initial begin ....\n\n\nToggle the --coverage flag in the Makefile\nMakefile:\n\n#VERILATOR_FLAGS += --coverage\nVERILATOR_FLAGS += --coverage\n\n\nResults:\n\n\nWith the --coverage flag:\n\n-- Verilator tracing example\n\n-- VERILATE ----------------\nverilator -cc --exe -x-assign fast -Wall --trace --assert --coverage   -f input.vc top.v sim_main.cpp\n\n-- BUILD -------------------\nmake -j -C obj_dir -f ../Makefile_obj\n.....\n....\n-- RUN ---------------------\nobj_dir/Vtop +trace\n\n[1] Tracing to logs/vlt_dump.vcd...\n\n[1] Model running...\n\n[1] clk=1 rstl=1 iquad=1234 -> oquad=1235 owide=3_22222222_11111112\n...\n...\n[16] clk=0 rstl=1 iquad=12c4 -> oquad=12c5 owide=3_22222222_11111112\n*-* All Finished *-*\n- sub.v:29: Verilog $finish\n[17] clk=1 rstl=1 iquad=12c4 -> oquad=12c5 owide=3_22222222_11111112\n\n-- COVERAGE ----------------\nverilator_coverage --annotate logs/annotated logs/coverage.dat\nTotal coverage (2/36) 5.00%\nSee lines with '%00' in logs/annotated\n\n-- DONE --------------------\nTo see waveforms, open vlt_dump.vcd in a waveform viewer\n\n\nWithout the --coverage flag:\n\nrm -rf obj_dir logs *.log *.dmp *.vpd coverage.dat core\n\n-- Verilator tracing example\n\n-- VERILATE ----------------\nverilator -cc --exe -x-assign fast -Wall --trace --assert -f input.vc top.v sim_main.cpp\n%Warning-UNUSEDSIGNAL: top.v:35:8: Signal is not driven, nor used: 'tes_arg'\n                                 : ... In instance top\n   35 |    reg tes_arg;\n      |        ^~~~~~~\n                       ... For warning description see https://verilator.org/warn/UNUSEDSIGNAL?v=5.002\n                       ... Use \"/* verilator lint_off UNUSEDSIGNAL */\" and lint_on around source to disable this message.\n%Error: Exiting due to 1 warning(s)\nmake: *** [Makefile:64: run] Error 1\n\n\nWhat 'verilator --version' are you using? 5.002 2022-10-29 rev v5.002-29-gdb39d70c7\nWhat OS and distribution are you using? Ubuntu 20.04/Red Hat Enterprise 7.9\nMay we assist you in trying to fix this in Verilator yourself? Yes"
}