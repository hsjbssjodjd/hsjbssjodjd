{
    "URL": "https://github.com/steveicarus/iverilog/issues/621",
    "Summary": "accessing 2D array defined through generate command",
    "Description": "I have a module that generates a memory with a nested generate command.\nThe final array is a 2D array with 32x4 elements each one on 8 bits.\nI see that this array is not automatically dumped using $dumpvars.\nI the assigned the elements to a wire and dumped them.\nThe results are tricky.  The varius elements are visualized correctly with the execption of the element with [0,0] index.\nBelow the example of the code I put in the TB.\n// definition of the 2D array that accesses to the internal hierarchy\nwire [31:0] MEM [31:0];\ngenvar ii;\ngenerate\nfor (ii=0;ii<32;ii=ii+1)\nassign MEM[ii] = {UUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[3].byte_ram[ii],\nUUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[2].byte_ram[ii],\nUUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[1].byte_ram[ii],\nUUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[0].byte_ram[ii]};\nendgenerate\n// code for the initial block\ninitial\nbegin\n$dumpfile(\"waveform.vcd\");\n$dumpvars;\nfor (idx = 0; idx < 32; idx = idx + 1) $dumpvars(0, MEM[idx]);\nEverything works fine with the MEM elements from 1 to 31. They are visualized and when I chenge the values they behave accordingly.\nBut when I work with the element MEM[0] only the higher 16bits are changed and the other ones remain xxxxxx.\nIt looks like there is problem in conncting the MEM0] with the elements:\nUUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[1].byte_ram[0],\nUUT.Mycirc.BRAM_GEN[0].BYTE_BRAM_GEN[0].byte_ram[0]\n\nIt is not a visualization probelm. I checke the vcd file visualized by GTKwave and it stores the wrong result.\nthe same code is simulate in Mdelsim and provides correct results also for the MEM0] element.\n\nAny hint?\nThx"
}